"use client";

export default function MembershipPage() {
  // Use environment variable for membership campaign ID
  const membershipCampaignId =
    process.env.NEXT_PUBLIC_DONORBOX_MEMBERSHIP_CAMPAIGN ||
    "haitian-family-relief-membership";
  const isTestMode = process.env.NEXT_PUBLIC_DONATION_TEST_MODE === "true";

  // Build the membership URL with test mode support
  const membershipUrl = isTestMode
    ? `https://donorbox.org/embed/${membershipCampaignId}?test=true&default_interval=m&suggested_amounts=4.80,9.90,15.00,19.80,25.00,50.00`
    : `https://donorbox.org/embed/${membershipCampaignId}?default_interval=m&suggested_amounts=4.80,9.90,15.00,19.80,25.00,50.00`;

  return (
    <section className="max-w-3xl mx-auto py-10">
      <h2 className="text-3xl font-bold text-center mb-4">Membership</h2>
      <p className="text-center text-lg mb-8 text-zinc-700">
        Join our family of recurring supporters! Choose a monthly or yearly plan
        and make a difference every day.
      </p>

      {isTestMode && (
        <div className="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-6 text-center">
          <strong>TEST MODE:</strong> This is a test membership form. No real
          charges will be processed.
        </div>
      )}

      <div className="w-full flex justify-center my-6">
        <iframe
          src={membershipUrl}
          title="Haitian Family Relief Project Membership"
          width="100%"
          height="900"
          style={{ maxWidth: "500px", minWidth: "310px", border: "none" }}
          name="donorbox-membership"
          loading="lazy"
        />
      </div>
      <div className="text-xs text-center text-zinc-400 mt-6">
        Memberships are securely handled via Donorbox monthly/yearly recurring
        giving options.
      </div>
    </section>
  );
}
